# Описание
Весь подход заключается в запуске процедур и логирования их выполнения путем проверок (assert).
## Именование и расположение
Тестовые процедуры должны распологаться внутри тестовых пакетов, не иметь параметров и иметь префикс в наименовании "t_". 
Пакеты также должны иметь префикс в наименовании "t_".
```plsql
create or replace package t_finance_calc is

  procedure t_calc_nds;
  ...
```
## Setup и Teardown
Для каждого теста можно определить эти процесса. Это также процедуры без параметров с именем имеющим следующую структуру:
```plsql
 procedure s_[имя теста после "t_"]; -- для setup
 procedure d_[имя теста после "t_"]; -- для teardown
``` 
## Запуск тестов
```plsql
 begin
  unit_test.run_test(p_pack_nm        => :p_pack_nm,
                     p_test_nm        => :p_test_nm,
                     p_ignore_success => :p_ignore_success,
                     p_store_log      => :p_store_log);
 end;
``` 
Просто запускаем данную процедуру и смотрим лог.

Параметры:
* p_pack_nm - наименование пакета с тестами (по умолчанию все пакеты)
* p_test_nm - наименование тестовой процедуры (по умолчанию все процедуры)
* p_ignore_success - признак запрета логирования успешных запусков, если установлено true то выводятся только ошибки иначе результаты всех запусков.
* p_store_log - признак сохранения результата запуска в таблицу, иначе выводится в консоль с помощью dbms_output

## Просмотр результатов запуска
В случае использования параметра p_store_log=true , результаты запусков тестов попадают в таблицу unit_test_log.
Для выборки результатов по последнему запуску в рамках сессии можно использовать следующий запрос
```sql
select * from unit_test_log l where l.id_run = unit_test.get_last_run_id
``` 
Данная таблица содержит следующие поля:
* id_run - идентификатор запуска (генерируется автоматически)
* nm_package - наименование тестового пакета
* nm_test - наименование тестовой процедуры
* pr_success - признак успешного выполнения теста 
    * 1 - успешно
    * 0 - с ошибкой
* nm_msg - пользовательское сообщение написаное при использовании assert
* dt_run - дата и время запуска
* nm_addition - дополнительное сообщение 
